<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LocSmash</title>
    <link rel="icon" href="#">
    <link rel="stylesheet" href="../../node-modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="../../node-modules/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="../../SRC/primary.css">
    <link rel="stylesheet" href="../../css/rating/rating.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />



</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark px-4 ">


    <div class="collapse navbar-collapse " id="navbarNav">
        <div class="navbar-nav gap-4">
            <a class="nav-link categoryLink" href="../all_category_page/all_category_page.html">دسته بندی ها</a>
            <a class="nav-link" href="../landing_page/LandingPage.html">خانه</a>
            <a class="nav-link" href="../bussinessRegistration_page/bussinessRegistration.html">ثبت بیزینس</a>
            <a class="nav-link" href="../user_Registration_page/user_Registration.html">پروفایل</a>
        </div>
    </div>
    <button class="navbar-toggler no-border p-0 " type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="نمایش/پنهان منو" >
        <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand animate__animated animate__infinite" href="#">LOCSMASH</a>
</nav>
<section class="container my-5">
    <h2 class="category-title text-end mb-4">بهترین بیزینس ها</h2>
    <div class="row">
        <!-- Sidebar Filter -->
        <div class="col-lg-3 mb-4">
            <form id="filterForm" class="filter-box p-3 rounded shadow-sm animate__animated animate__fadeInRight">
                <div class="mb-3">
                    <label for="citySelect" class="form-label">شهر</label>
                    <select class="form-select" id="citySelect">
                        <option selected>همه شهرها</option>
                        <option value="تهران">تهران</option>
                        <option value="مشهد">مشهد</option>
                        <option value="اصفهان">اصفهان</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="ratingRange" class="form-label">حداقل امتیاز</label>
                    <input type="range" class="form-range" min="0" max="10" step="0.1" id="ratingRange" value="0">
                    <div class="text-end small"><span id="ratingValue">0</span>/10</div>
                </div>
                <div class="mb-3">
                    <label for="priceSelect" class="form-label">محدوده قیمت</label>
                    <select class="form-select" id="priceSelect">
                        <option selected>همه</option>
                        <option value="low">ارزان</option>
                        <option value="medium">متوسط</option>
                        <option value="high">گران</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary-custom w-100">اعمال فیلتر</button>
            </form>
        </div>

        <!-- Business List -->
        <div class="col-lg-9">
            <div class="business-list d-flex flex-column gap-3">
                <div class="business-list d-flex flex-column gap-3">

                    <div class="business-card rank-1">
                        <div class="rank-wrapper">
                            <p class="rank-text">#1</p>
                            <i class="fa-solid fa-crown rank-icon" style="color: gold;"></i>
                        </div>
                        <div class="logo-box">لوگو</div>
                        <div class="text-end">
                            <div class="fw-bold">فست فود طلایی</div>
                            <small>تهران</small>
                            <div class="more-info">
                                بهترین فست فود با کیفیت بی‌نظیر و سرویس سریع.
                            </div>
                        </div>
                        <div class="score-box">9.9/10</div>
                    </div>

                    <div class="business-card rank-2">
                        <div class="rank-wrapper">
                            <p class="rank-text">#2</p>
                        </div>
                        <div class="logo-box">لوگو</div>
                        <div class="text-end">
                            <div class="fw-bold">کافی‌شاپ نقره‌ای</div>
                            <small>مشهد</small>
                            <div class="more-info">
                                بهترین کافی‌شاپ برای لحظاتی آرام و لذت‌بخش.
                            </div>
                        </div>
                        <div class="score-box">9.7/10</div>
                    </div>

                    <div class="business-card rank-3">
                        <div class="rank-wrapper">
                            <p class="rank-text">#3</p>
                        </div>
                        <div class="logo-box">لوگو</div>
                        <div class="text-end">
                            <div class="fw-bold">نانوایی برنزی</div>
                            <small>اصفهان</small>
                            <div class="more-info">
                                نانوایی سنتی با انواع نان‌های تازه و خوش‌طعم.
                            </div>
                        </div>
                        <div class="score-box">9.5/10</div>
                    </div>

                    <div class="business-card rank-4to10">
                        <div class="rank-wrapper">
                            <p class="rank-text">#4</p>
                        </div>
                        <div class="logo-box">لوگو</div>
                        <div class="text-end">
                            <div class="fw-bold">نمونه چهارم</div>
                            <small>تهران</small>
                            <div class="more-info">
                                توضیح کوتاه درباره نمونه چهارم که کیفیت خوبی دارد.
                            </div>
                        </div>
                        <div class="score-box">9.2/10</div>
                    </div>

                </div>

            </div>
        </div>
    </div>
</section>

<script>
    const form = document.getElementById("filterForm");
    const cards = document.querySelectorAll(".business-card");
    const ratingRange = document.getElementById("ratingRange");
    const ratingValue = document.getElementById("ratingValue");

    // نمایش مقدار رنج امتیاز
    ratingRange.addEventListener("input", () => {
        ratingValue.textContent = ratingRange.value;
    });

    form.addEventListener("submit", function(e) {
        e.preventDefault();

        // fadeOut همه کارت‌ها
        cards.forEach(card => card.classList.add("fade-out"));

        setTimeout(() => {
            const selectedCity = document.getElementById("citySelect").value;
            const selectedRating = parseFloat(ratingRange.value);
            const selectedPrice = document.getElementById("priceSelect").value;

            cards.forEach(card => {
                const city = card.dataset.city || "";
                const rating = parseFloat(card.dataset.rating) || 0;
                const price = card.dataset.price || "";

                const cityMatch = (selectedCity === "همه شهرها" || selectedCity === city);
                const priceMatch = (selectedPrice === "همه" || selectedPrice === price);
                const ratingMatch = (rating >= selectedRating);

                if (cityMatch && priceMatch && ratingMatch) {
                    card.style.display = "flex";
                    card.classList.remove("fade-out");
                    card.classList.add("fade-in");
                } else {
                    card.style.display = "none";
                    card.classList.remove("fade-in");
                    card.classList.remove("fade-out");
                }
            });

            cards.forEach(card => {
                card.addEventListener("animationend", () => {
                    card.classList.remove("fade-in");
                }, { once: true });
            });

        }, 500);
    });

    // after filtering//
    // applyCardStyles();

        window.addEventListener('wheel', e => { if (e.ctrlKey) e.preventDefault(); }, { passive: false });
        window.addEventListener('touchstart', e => { if (e.touches.length > 1) e.preventDefault(); }, { passive: false });
        window.addEventListener('gesturestart', e => e.preventDefault());

</script>


    <script src="../../node-modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../node-modules/jquery/dist/jquery.js"></script>
    <script src="../../SRC/primary.js"></script>
    <script src="../../JS/#"></script>
</body>
</html>
